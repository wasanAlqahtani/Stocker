{% extends 'main/base.html' %}

{% block title %}
Products Page
{% endblock %}
{% block content %}

     {% if messages %}
        {% for message in messages %}
          <div class="alert alert-success">
            {{ message }}
          </div>
        {% endfor %}
      {% endif %}

<div class="d-flex justify-content-between align-items-center mb-3">
<button type="button" class="btn btn-outline-secondary btn-sm" data-bs-toggle="modal" data-bs-target="#addProductModal">
  Add Product
</button>
<div class="modal fade" id="addProductModal" tabindex="-1" aria-labelledby="addProductModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">

      <!--Add Product -->

      <form method="POST" action="{% url 'product:add_product_view' %}" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="modal-header">
          <h5 class="modal-title" id="addProductModalLabel">Add Product</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body">
          <div class="mb-3">
            <label for="{{ product_form.name.id_for_label }}" class="form-label">{{ product_form.name.label }}</label>
            {{ product_form.name }}
          </div>

          <div class="mb-3">
            <label for="{{ product_form.description.id_for_label }}" class="form-label">{{ product_form.description.label }}</label>
            {{ product_form.description }}
          </div>

          <div class="mb-3">
            <label for="{{ product_form.quantity.id_for_label }}" class="form-label">{{ product_form.quantity.label }}</label>
            {{ product_form.quantity }}
          </div>

          <div class="mb-3">
            <label for="{{ product_form.price.id_for_label }}" class="form-label">{{ product_form.price.label }}</label>
            {{ product_form.price }}
          </div>

          <div class="mb-3">
            <label for="{{ product_form.category.id_for_label }}" class="form-label">{{ product_form.category.label }}</label>
            {{ product_form.category }}
          </div>

          <div class="mb-3">
            <label for="{{ product_form.suppliers.id_for_label }}" class="form-label">{{ product_form.suppliers.label }}</label>
            {{ product_form.suppliers }}
          </div>

          <div class="mb-3">
            <label for="{{ product_form.picture.id_for_label }}" class="form-label">{{ product_form.picture.label }}</label>
            {{ product_form.picture }}
          </div>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-primary btn-sm">Add Product</button>
        </div>
      </form>
    </div>
  </div>
</div>
    <form method="GET" class="d-flex gap-2" action="{% url 'product:all_product_view' %}">
       <select name="suppliers" class="form-select form-select-sm">
    <option value="">Filter by Supplier</option>
    {% for supplier in suppliers %}
      <option value="{{ supplier.id }}" {% if supplier.id|stringformat:"s" == selected_supplier %}selected{% endif %}>{{ supplier.name }}</option>
    {% endfor %}
  </select>

  <select name="category" class="form-select form-select-sm">
    <option value="">Filter by Category</option>
    {% for category in categories %}
      <option value="{{ category.id }}" {% if category.id|stringformat:"s" == selected_category %}selected{% endif %}>{{ category.category_name }}</option>
    {% endfor %}
  </select>
      <button type="submit" class="btn btn-outline-secondary btn-sm">Filter</button>
    </form>

</div>

{% include 'product/product_list.html' %}

{% endblock %}